(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a78d7c0"],{"2c25":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("layout-default",[r("div",{staticClass:"Store"},[r("form",{staticClass:"md-layout",attrs:{id:"app",action:"#",method:"post"}},[r("md-card",{staticClass:"md-layout-item md-small-size-100"},[r("md-card-header",[r("div",{staticClass:"md-title"},[e._v("Store/update package")])]),r("md-card-content",[r("div",{staticClass:"md-layout-item"},[r("md-field",{class:e.packageIdMsgClass},[r("label",{attrs:{for:"pId"}},[e._v("Package ID")]),r("md-input",{attrs:{name:"pId",id:"pId",placeholder:"Package ID",required:"",disabled:e.transactionInProgress},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.refresh(t))}},model:{value:e.pId,callback:function(t){e.pId=t},expression:"pId"}}),r("md-button",{staticClass:"md-icon-button",staticStyle:{margin:"0"},on:{click:function(t){e.showQrScanner=!0}}},[r("md-icon",[e._v("qr_code_scanner")])],1)],1)],1),r("div",{staticClass:"md-layout-item"},[r("md-field",{class:e.ownerIdMsgClass},[r("label",{attrs:{for:"owner"}},[e._v("Owner Identity")]),r("md-select",{attrs:{name:"owner",id:"owner",placeholder:"Owner Identity",required:"",disabled:e.transactionInProgress},model:{value:e.owner,callback:function(t){e.owner=t},expression:"owner"}},[r("md-option",{attrs:{disabled:"",name:"",value:""}},[e._v("Please select owner identity")]),e._l(e.ownerSet,(function(t){return r("md-option",{key:t,attrs:{value:t}},[e._v(e._s(e.itemLabelTemplate(t)))])}))],2)],1)],1),r("md-card-actions",[e.transactionInProgress?r("div",{staticClass:"rq-spinner-container"},[r("md-progress-spinner",{attrs:{"md-mode":"indeterminate","md-diameter":30,"md-stroke":3}})],1):r("md-button",{staticClass:"md-primary md-raised",attrs:{type:"button"},on:{click:e.store}},[e._v("send")])],1),e.response?r("div",{staticClass:"response response-success"},[e._v(e._s(e.response))]):e._e(),e.formError?r("div",{staticClass:"response response-error"},[e._v(e._s(e.formError))]):e._e()],1)],1)],1)]),r("md-dialog",{staticClass:"scan-qr-dialog",attrs:{"md-fullscreen":!1,"md-active":e.showQrScanner},on:{"update:mdActive":function(t){e.showQrScanner=t},"update:md-active":function(t){e.showQrScanner=t}}},[r("md-dialog-title",[e._v("Scan QR package ID")]),r("md-dialog-content",{staticClass:"qr-dialog-container"},[r("div",{staticClass:"qr-code-scanner",class:{"no-camera-available":e.qrInitError}},[r("qrcode-stream",{staticClass:"qr-code-stream",on:{decode:e.onQrDecode,init:e.onQrInit}}),e.qrInitError?r("div",{staticClass:"qr-init-error"},[e._v("Error: "+e._s(e.qrInitError)+"!")]):e._e()],1)]),r("md-dialog-actions",[r("md-button",{staticClass:"md-primary",on:{click:function(t){e.showQrScanner=!1}}},[e._v("Close")])],1)],1)],1)},a=[],s=(r("c975"),r("b0c0"),r("d3b7"),r("96cf"),r("1da1")),o=r("7c64"),i=r("51be"),c={name:"Store",components:{LayoutDefault:o["a"]},data:function(){return{ownerSet:["post_box","post_office","van_delivery_company_a","van_delivery_company_b","van_delivery_company_c","warehouse_a","letter_box"],owner:"",pId:"",response:null,formError:null,msgTimeout:null,checkFormValidity:!1,transactionInProgress:!1,qrInitError:null,showQrScanner:!1}},methods:{onQrDecode:function(e){this.pId=e,this.showQrScanner=!1},onQrInit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e;case 3:delete t.qrInitError,r.next=9;break;case 6:r.prev=6,r.t0=r["catch"](0),"NotAllowedError"===r.t0.name?t.qrInitError="You need to grant camera access permisson":"NotFoundError"===r.t0.name?t.qrInitError="No camera available":"NotReadableError"===r.t0.name?t.qrInitError="Is the camera already in use?":"OverconstrainedError"===r.t0.name?t.qrInitError="Installed cameras are not suitable":"StreamApiNotSupportedError"===r.t0.name?t.qrInitError="This browser does not support using this device's camera":["NotSupportedError","InsecureContextError"].indexOf(r.t0.name)>=0?t.qrInitError="Secure context required (HTTPS)":t.qrInitError="No camera access available";case 9:case"end":return r.stop()}}),r,null,[[0,6]])})))()},itemLabelTemplate:function(e){var t="";return e&&""!==e&&(t+=e,"letter_box"===e&&(t+=" (package delivered)")),t},store:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.transactionInProgress){e.next=2;break}return e.abrupt("return");case 2:if(this.response=null,this.formError=null,this.msgTimeout&&(clearTimeout(this.msgTimeout),delete this.msgTimeout),!this.pId||""===this.pId||!this.owner||""===this.owner){e.next=22;break}return this.checkFormValidity=!1,this.transactionInProgress=!0,t={data:{key:this.pId,actor:this.owner}},r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=12,fetch(i["API_LOCATION"]+"store",r);case 12:return n=e.sent,e.next=15,n.json();case 15:this.transactionInProgress=!1,this.response="Package history successfully updated.",this.msgTimeout=setTimeout((function(){a.response=null}),3e3),this.owner="",this.pId="",e.next=24;break;case 22:this.formError="Package ID and Owner Identity must be set!",this.checkFormValidity=!0;case 24:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},computed:{packageIdMsgClass:function(){var e={};return this.pId&&""!==this.pId||(e["md-invalid"]=this.checkFormValidity),e},ownerIdMsgClass:function(){var e={};return this.owner&&""!==this.owner||(e["md-invalid"]=this.checkFormValidity),e}}},d=c,l=(r("33e6"),r("2877")),u=Object(l["a"])(d,n,a,!1,null,null,null);t["default"]=u.exports},"33e6":function(e,t,r){"use strict";var n=r("ff7d"),a=r.n(n);a.a},b0c0:function(e,t,r){var n=r("83ab"),a=r("9bf2").f,s=Function.prototype,o=s.toString,i=/^\s*function ([^ (]*)/,c="name";n&&!(c in s)&&a(s,c,{configurable:!0,get:function(){try{return o.call(this).match(i)[1]}catch(e){return""}}})},c975:function(e,t,r){"use strict";var n=r("23e7"),a=r("4d64").indexOf,s=r("a640"),o=r("ae40"),i=[].indexOf,c=!!i&&1/[1].indexOf(1,-0)<0,d=s("indexOf"),l=o("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:c||!d||!l},{indexOf:function(e){return c?i.apply(this,arguments)||0:a(this,e,arguments.length>1?arguments[1]:void 0)}})},ff7d:function(e,t,r){}}]);
//# sourceMappingURL=chunk-1a78d7c0.a60ad4fc.js.map