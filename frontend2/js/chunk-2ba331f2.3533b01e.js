(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ba331f2"],{"181d":function(e,t,r){},"51be":function(e,t,r){"use strict";e.exports={API_LOCATION:"https://nb-tracking.samlinux.com/api2/"}},"5db5":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("layout-default",[r("div",{staticClass:"Store"},[r("form",{staticClass:"md-layout",attrs:{id:"app",action:"#",method:"post"}},[r("md-card",{staticClass:"md-layout-item md-small-size-100"},[r("md-card-header",[r("div",{staticClass:"md-title"},[e._v("Store/update package")])]),r("md-card-content",[r("div",[r("md-autocomplete",{class:{"has-error":e.formError&&!(e.rfid&&""!==e.rfid)},attrs:{placeholder:"Package RFID","md-options":e.rfidSet,required:"",disabled:e.transactionInProgress},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.refresh(t))},"md-changed":e.getRfidSet,"md-selected":e.onRfidSelected},scopedSlots:e._u([{key:"md-autocomplete-item",fn:function(t){var r=t.item;return[e._v(e._s(r))]}},{key:"md-autocomplete-empty",fn:function(t){var n=t.term;return[r("span",[e._v('No package with RFID matching "'+e._s(n)+'" was found.')])]}}]),model:{value:e.pId,callback:function(t){e.pId=t},expression:"pId"}},[r("label",[e._v("Package RFID")]),e.rfid&&""!==e.rfid?r("div",{staticClass:"md-helper-text"},[r("strong",[e._v("Selected RFID:")]),r("span",{staticClass:"package-id-selected"},[e._v(e._s(e.rfid))])]):r("div",{staticClass:"md-helper-text",class:{"has-error":e.formError&&(!e.rfid||""!==e.rfid)}},[r("strong",[e._v("Please select an existing Package RFID.")])])])],1),r("div",{staticStyle:{"margin-top":"35px"}},[r("md-field",{class:e.ownerIdMsgClass},[r("label",{attrs:{for:"owner"}},[e._v("Owner Identity")]),r("md-select",{attrs:{name:"owner",id:"owner",placeholder:"Owner Identity",required:"",disabled:e.transactionInProgress},model:{value:e.owner,callback:function(t){e.owner=t},expression:"owner"}},[r("md-option",{attrs:{disabled:"",name:"",value:""}},[e._v("Please select owner identity")]),e._l(e.ownerSet,(function(t){return r("md-option",{key:t,attrs:{value:t}},[e._v(e._s(e.itemLabelTemplate(t)))])}))],2)],1)],1),r("md-card-actions",[e.transactionInProgress?r("div",{staticClass:"rq-spinner-container"},[r("md-progress-spinner",{attrs:{"md-mode":"indeterminate","md-diameter":30,"md-stroke":3}})],1):r("md-button",{staticClass:"md-primary md-raised",attrs:{type:"button"},on:{click:e.store}},[e._v("send")])],1),e.response?r("div",{staticClass:"response response-success"},[e._v(e._s(e.response))]):e._e(),e.formError?r("div",{staticClass:"response response-error"},[e._v(e._s(e.formError))]):e._e()],1)],1)],1)]),r("QrCodeScanner",{attrs:{openDialog:e.showQrScanner},on:{qrCodeScanned:e.onQrDecode}})],1)},s=[],a=(r("d3b7"),r("96cf"),r("1da1")),i=r("7c64"),o=r("51be"),c={name:"Store",components:{LayoutDefault:i["a"]},data:function(){return{ownerSet:["freight_forwarder_warehouse","truck","export_docks","storage_location","loaded_in_trolley","aircraft_bay","loaded_into_aircraft","aircraft_takeoff"],owner:"",rfid:"",pId:null,response:null,formError:null,msgTimeout:null,checkFormValidity:!1,transactionInProgress:!1,showQrScanner:!1,rfidSet:[]}},methods:{onQrDecode:function(e){this.pId=e&&""!==e?e:""},itemLabelTemplate:function(e){var t="";return e&&""!==e&&(t+=e),t},getRfidSet:function(e){var t=this;e&&""===e||(this.rfid=""),this.rfidSet=new Promise((function(r){r(t.fetchFoundRfidData(e))}))},fetchFoundRfidData:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n,s,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=[],t&&""!==t){e.next=3;break}return e.abrupt("return",r);case 3:return n={data:{key:t}},s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=7,fetch(o["API_LOCATION"]+"search",s);case 7:return a=e.sent,e.next=10,a.json();case 10:return i=e.sent,i&&i.key&&r.push(i.key),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),store:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r,n,s,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.transactionInProgress){e.next=2;break}return e.abrupt("return");case 2:if(this.rfid&&""!==this.rfid&&(t=this.rfid),this.response=null,this.formError=null,this.msgTimeout&&(clearTimeout(this.msgTimeout),delete this.msgTimeout),!t||!this.owner||""===this.owner){e.next=23;break}return this.checkFormValidity=!1,this.transactionInProgress=!0,r={data:{key:t,actor:this.owner}},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},e.next=13,fetch(o["API_LOCATION"]+"store",n);case 13:return s=e.sent,e.next=16,s.json();case 16:this.transactionInProgress=!1,this.response="Package history successfully updated.",this.msgTimeout=setTimeout((function(){a.response=null}),3e3),this.owner="",this.pId="",e.next=25;break;case 23:this.formError="Package ID and Owner Identity must be set!",this.checkFormValidity=!0;case 25:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onRfidSelected:function(e){e&&""!==e&&(this.rfid=e)}},computed:{packageIdMsgClass:function(){var e={};return this.pId&&""!==this.pId||(e["md-invalid"]=this.checkFormValidity),e},ownerIdMsgClass:function(){var e={};return this.owner&&""!==this.owner||(e["md-invalid"]=this.checkFormValidity),e}}},d=c,u=(r("74ea"),r("2877")),l=Object(u["a"])(d,n,s,!1,null,"33e83efe",null);t["default"]=l.exports},"74ea":function(e,t,r){"use strict";var n=r("84bc"),s=r.n(n);s.a},7661:function(e,t,r){"use strict";var n=r("181d"),s=r.n(n);s.a},"7c64":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"LayoutDefault"},[r("main",{staticClass:"LayoutDefault__main"},[e._t("default")],2)])},s=[],a={name:"LayoutDefault",data:function(){return{}},created:function(){}},i=a,o=(r("7661"),r("2877")),c=Object(o["a"])(i,n,s,!1,null,null,null);t["a"]=c.exports},"84bc":function(e,t,r){}}]);
//# sourceMappingURL=chunk-2ba331f2.3533b01e.js.map