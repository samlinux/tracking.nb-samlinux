(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02fd7dfb"],{"0852":function(e,t,a){e.exports=a.p+"img/pears.f4695066.png"},"0a57":function(e,t,a){e.exports=a.p+"img/apples.6310b5c8.png"},"200d":function(e,t,a){e.exports=a.p+"img/bananas.132fce3f.png"},"5db5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("layout-default",[r("div",{staticClass:"Store"},[e.cropKey?e._e():r("div",{staticClass:"store-crop"},[r("form",{staticClass:"md-layout",attrs:{id:"create-crop-form"}},[r("md-card",{staticClass:"md-layout-item md-small-size-100"},[r("md-card-header",[r("div",{staticClass:"md-title"},[e._v("Create a crop")])]),r("md-card-content",[r("div",[r("md-field",{class:e.validationFpoMsgClass},[r("label",[e._v("FPO name")]),r("md-input",{model:{value:e.fpoName,callback:function(t){e.fpoName=t},expression:"fpoName"}})],1)],1),r("div",[r("md-field",[r("label",[e._v("Crop name")]),r("md-input",{model:{value:e.cropName,callback:function(t){e.cropName=t},expression:"cropName"}})],1)],1),r("div",[r("md-datepicker",{attrs:{"md-immediately":""},model:{value:e.cropDate,callback:function(t){e.cropDate=t},expression:"cropDate"}},[r("label",[e._v("Crop date")])])],1),r("div",[r("md-field",[r("label",[e._v("Crop ID")]),r("md-input",{model:{value:e.cropId,callback:function(t){e.cropId=t},expression:"cropId"}})],1)],1),r("md-card-actions",[e.transactionInProgress?r("div",{staticClass:"rq-spinner-container"},[r("md-progress-spinner",{attrs:{"md-mode":"indeterminate","md-diameter":30,"md-stroke":3}})],1):r("md-button",{staticClass:"md-accent md-raised",attrs:{type:"button"},on:{click:e.storeCrop}},[e._v("Store")])],1),e.response?r("div",{staticClass:"response response-success"},[e._v(" "+e._s(e.response)+" ")]):e._e(),e.formError?r("div",{staticClass:"response response-error"},[e._v(" "+e._s(e.formError)+" ")]):e._e()],1)],1)],1)]),e.cropKey?r("div",{staticClass:"store-sub-data md-layout md-gutter",class:{"store-form-read-mode":e.readMode}},[e.transactionInProgress?r("div",{staticClass:"store-sub-data-locked"}):e._e(),r("div",{staticClass:"md-layout-item md-medium-size-50 md-small-size-100"},[r("div",{staticClass:"crop-detail-container"},[r("md-card",[r("md-card-header",[r("md-button",{staticClass:"md-icon-button md-raised md-plain detail-back-btn",on:{click:function(t){return e.goBack()}}},[r("md-icon",[e._v("arrow_back")])],1),r("div",{staticClass:"md-title detail-back-btn-margin"},[e._v("Crop")])],1),r("md-card-content",[r("div",{staticClass:"crop-image-container"},[e.showCropImage("apple",e.cropData.cropName)?r("img",{attrs:{src:a("0a57")}}):e._e(),e.showCropImage("pear",e.cropData.cropName)?r("img",{attrs:{src:a("0852")}}):e._e(),e.showCropImage("banana",e.cropData.cropName)?r("img",{attrs:{src:a("200d")}}):e._e()]),r("md-list",[r("md-list-item",[r("md-icon",[e._v("people")]),r("div",{staticClass:"md-list-item-text"},[r("span",[e._v(e._s(e.cropData.fpoName))]),r("span",[e._v("FPO")])])],1),r("md-list-item",[r("md-icon",[e._v("grass")]),r("div",{staticClass:"md-list-item-text"},[r("span",[e._v(e._s(e.cropData.cropName))]),r("span",[e._v("Crop")])])],1),r("md-list-item",[r("md-icon",[e._v("calendar_today")]),r("div",{staticClass:"md-list-item-text"},[r("span",[e._v(e._s(e.formatDate(e.cropData.cropDate)))]),r("span",[e._v("Date")])])],1)],1)],1)],1)],1),r("div",{staticClass:"farmer-list-container"},[r("md-card",[r("md-card-header",[r("div",{staticClass:"md-title"},[r("md-button",{staticClass:"md-icon-button md-raised md-plain list-add-btn",on:{click:function(t){return e.openFarmerDialog()}}},[r("md-icon",[e._v("add")])],1),e._v(" Farmers ")],1)]),r("md-card-content",[e.cropData.farmer&&e.cropData.farmer.length>0?r("md-list",{staticClass:"md-list-repeat"},e._l(e.cropData.farmer,(function(t){return r("md-list-item",{key:t.index},[r("md-icon",[e._v("person")]),r("div",{staticClass:"md-list-item-text"},[r("span",[e._v(e._s(t.Name))]),r("span",[e._v(e._s(t.Address))])])],1)})),1):e._e(),e.cropData.farmer&&e.cropData.farmer.length>0?e._e():r("div",[e._v(" No farmers created yet. ")])],1)],1)],1)]),r("div",{staticClass:"md-layout-item md-medium-size-50 md-small-size-100"},[r("div",{staticClass:"seed-detail-container"},[r("md-card",[r("md-card-header",[r("div",{staticClass:"md-title"},[e._v("Seed")])]),r("md-card-content",[r("div",{staticClass:"md-layout md-gutter"},[r("div",{staticClass:"md-layout-item md-xsmall-size-100"},[r("md-field",[r("label",[e._v("Seed name")]),r("md-input",{attrs:{readOnly:e.readMode},model:{value:e.seedData.cropName2,callback:function(t){e.$set(e.seedData,"cropName2",t)},expression:"seedData.cropName2"}})],1)],1),r("div",{staticClass:"md-layout-item md-xsmall-size-100"},[r("md-field",[r("label",[e._v("Varity name")]),r("md-input",{attrs:{readOnly:e.readMode},model:{value:e.seedData.cropVarityName,callback:function(t){e.$set(e.seedData,"cropVarityName",t)},expression:"seedData.cropVarityName"}})],1)],1)]),r("div",{staticClass:"md-layout md-gutter"},[r("div",{staticClass:"md-layout-item md-xsmall-size-100"},[r("md-field",[r("label",[e._v("Purchased from")]),r("md-input",{attrs:{readOnly:e.readMode},model:{value:e.seedData.purchasedFrom,callback:function(t){e.$set(e.seedData,"purchasedFrom",t)},expression:"seedData.purchasedFrom"}})],1)],1),e.readMode?r("div",{staticClass:"md-layout-item md-xsmall-size-100"},[r("md-field",[r("label",[e._v("Purchased from")]),r("md-input",{attrs:{value:e.formatDate(e.seedData.seedDate),readOnly:""}})],1)],1):r("div",{staticClass:"md-layout-item md-xsmall-size-100"},[r("md-datepicker",{attrs:{"md-immediately":""},model:{value:e.seedData.seedDate,callback:function(t){e.$set(e.seedData,"seedDate",t)},expression:"seedData.seedDate"}},[r("label",[e._v("Seed date")])])],1)])]),r("md-card-actions",[e.transactionInProgress?r("div",{staticClass:"rq-spinner-container"},[r("md-progress-spinner",{attrs:{"md-mode":"indeterminate","md-diameter":30,"md-stroke":3}})],1):r("div",{staticClass:"store-seed-btn"},[r("md-button",{staticClass:"md-accent md-raised",attrs:{type:"button"},on:{click:e.storeSeed}},[e._v("Store")])],1)]),r("div",{staticClass:"response-container"},[e.seedResponse?r("div",{staticClass:"response response-success"},[e._v(" "+e._s(e.seedResponse)+" ")]):e._e(),e.seedFormError?r("div",{staticClass:"response response-error"},[e._v(" "+e._s(e.seedFormError)+" ")]):e._e()])],1)],1),r("div",{staticClass:"inputs-list-container"},[r("md-card",[r("md-card-header",[r("div",{staticClass:"md-title"},[r("md-button",{staticClass:"md-icon-button md-raised md-plain list-add-btn",on:{click:function(t){return e.openInputDialog()}}},[r("md-icon",[e._v("add")])],1),e._v(" Inputs ")],1)]),r("md-card-content",[e.cropData.inputs&&e.cropData.inputs.length>0?r("md-list",{staticClass:"md-list-repeat"},e._l(e.cropData.inputs,(function(t){return r("md-list-item",{key:t.index},[r("md-icon",[e._v("pest_control")]),r("div",{staticClass:"md-list-item-text"},[r("span",[e._v(e._s(t.Name)+" "),r("span",{staticClass:"row-date-val"},[e._v(" "+e._s(e.formatDate(t.InputDate))+" ")])]),r("span",[e._v(e._s(t.PurchasedFrom))]),r("span",[e._v(e._s(t.Type))])])],1)})),1):e._e(),e.cropData.inputs&&e.cropData.inputs.length>0?e._e():r("div",[e._v(" No inputs created yet. ")])],1)],1)],1)])]):e._e(),r("md-dialog",{attrs:{"md-active":e.farmerDetailActive,"md-close-on-esc":!1,"md-click-outside-to-close":!1},on:{"update:mdActive":function(t){e.farmerDetailActive=t},"update:md-active":function(t){e.farmerDetailActive=t}}},[r("md-dialog-title",[e._v("Add farmer")]),e.dialogTransactionInProgress?r("div",{staticClass:"dialog-data-locked"}):e._e(),r("md-dialog-content",[r("div",{staticClass:"md-layout md-gutter"},[r("div",{staticClass:"md-layout-item md-small-size-100"},[r("md-field",[r("label",[e._v("Name")]),r("md-input",{model:{value:e.farmerDetail.farmerName,callback:function(t){e.$set(e.farmerDetail,"farmerName",t)},expression:"farmerDetail.farmerName"}})],1)],1),r("div",{staticClass:"md-layout-item md-small-size-100"},[r("md-field",[r("label",[e._v("Address")]),r("md-input",{model:{value:e.farmerDetail.farmerAddress,callback:function(t){e.$set(e.farmerDetail,"farmerAddress",t)},expression:"farmerDetail.farmerAddress"}})],1)],1)]),r("div",{staticClass:"response-container"},[e.farmerFormError?r("p",{staticClass:"response response-error",staticStyle:{"margin-bottom":"0 !important","margin-top":"10px !important"}},[e._v(" "+e._s(e.farmerFormError)+" ")]):e._e()])]),r("md-dialog-actions",[r("md-button",{staticClass:"md-raised",staticStyle:{float:"left"},on:{click:function(t){e.farmerDetailActive=!1}}},[e._v("Cancel")]),e.dialogTransactionInProgress?e._e():r("md-button",{staticClass:"md-raised md-accent",on:{click:function(t){return e.storeFarmer()}}},[e._v("Add")]),e.dialogTransactionInProgress?r("div",{staticClass:"rq-spinner-container"},[r("md-progress-spinner",{attrs:{"md-mode":"indeterminate","md-diameter":30,"md-stroke":3}})],1):e._e()],1)],1),r("md-dialog",{attrs:{"md-active":e.inputDetailActive,"md-close-on-esc":!1,"md-click-outside-to-close":!1},on:{"update:mdActive":function(t){e.inputDetailActive=t},"update:md-active":function(t){e.inputDetailActive=t}}},[r("md-dialog-title",[e._v("Add input")]),e.dialogTransactionInProgress?r("div",{staticClass:"dialog-data-locked"}):e._e(),r("md-dialog-content",[r("div",{staticClass:"md-layout md-gutter"},[r("div",{staticClass:"md-layout-item md-xsmall-size-100"},[r("md-field",[r("label",[e._v("Name")]),r("md-input",{model:{value:e.inputDetail.inputName,callback:function(t){e.$set(e.inputDetail,"inputName",t)},expression:"inputDetail.inputName"}})],1)],1),r("div",{staticClass:"md-layout-item md-xsmall-size-100"},[r("md-field",[r("label",[e._v("Type")]),r("md-input",{model:{value:e.inputDetail.inputType,callback:function(t){e.$set(e.inputDetail,"inputType",t)},expression:"inputDetail.inputType"}})],1)],1)]),r("div",{staticClass:"md-layout md-gutter"},[r("div",{staticClass:"md-layout-item md-xsmall-size-100"},[r("md-field",[r("label",[e._v("Purchased from")]),r("md-input",{model:{value:e.inputDetail.inputPurchasedFrom,callback:function(t){e.$set(e.inputDetail,"inputPurchasedFrom",t)},expression:"inputDetail.inputPurchasedFrom"}})],1)],1),r("div",{staticClass:"md-layout-item md-xsmall-size-100"},[r("md-datepicker",{attrs:{"md-immediately":""},model:{value:e.inputDetail.inputDate,callback:function(t){e.$set(e.inputDetail,"inputDate",t)},expression:"inputDetail.inputDate"}},[r("label",[e._v("Date")])])],1)]),r("div",{staticClass:"response-container"},[e.inputFormError?r("p",{staticClass:"response response-error",staticStyle:{"margin-bottom":"0 !important","margin-top":"10px !important"}},[e._v(" "+e._s(e.inputFormError)+" ")]):e._e()])]),r("md-dialog-actions",[r("md-button",{staticClass:"md-raised",staticStyle:{float:"left"},on:{click:function(t){e.inputDetailActive=!1}}},[e._v("Cancel")]),e.dialogTransactionInProgress?e._e():r("md-button",{staticClass:"md-raised md-accent",on:{click:function(t){return e.storeInput()}}},[e._v("Add")]),e.dialogTransactionInProgress?r("div",{staticClass:"rq-spinner-container"},[r("md-progress-spinner",{attrs:{"md-mode":"indeterminate","md-diameter":30,"md-stroke":3}})],1):e._e()],1)],1)],1)])},s=[],i=(a("4160"),a("c975"),a("d3b7"),a("159b"),a("96cf"),a("1da1")),n=a("c1df"),o=a.n(n),d=a("7c64"),c=a("51be"),m={name:"Store",components:{LayoutDefault:d["a"]},data:function(){return{readMode:!1,backToSearch:!1,cropKey:null,cropData:null,seedData:{},farmerDetail:{},farmerDetailActive:!1,inputDetail:{},inputDetailActive:!1,fpoName:"",cropName:"",cropDate:null,cropId:"",response:null,formError:null,seedResponse:null,seedFormError:null,farmerFormError:null,inputFormError:null,msgTimeout:null,eventTarget:!1,checkFormValidity:!1,transactionInProgress:!1,dialogTransactionInProgress:!1}},created:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$material.locale.dateFormat="dd/MM/yyyy";case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){var e=!1,t=this.$route.params;if(t&&t.cropData){var a=t.cropData.key,r=t.cropData.seedData;delete t.cropData.key,delete t.cropData.seedData,a&&(t.cropData.readMode?this.readMode=!0:this.readMode=!1,this.cropData=t.cropData,this.seedData=r||{},this.cropKey=a,e=!0)}e?this.backToSearch=!0:localStorage.removeItem("search-data"),window.addCustomEventListener("navStore",this.resetCropDetailData)},destroyed:function(){window.removeCustomEventListener("navStore",this.resetCropDetailData)},methods:{loadCrop:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,r,s,i,n,o,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={data:{key:t}},r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},e.next=4,fetch(c["API_LOCATION"]+"getCrop",r);case 4:return s=e.sent,e.next=7,s.json();case 7:i=e.sent,i&&i.value&&(this.cropData={barCode:null,fpoName:i.value.FpoName,cropName:i.value.CropName,cropDate:new Date(i.value.CropDate),cropId:i.value.CropId},n=[],o=[],i.value.Farmer&&i.value.Farmer.forEach((function(e){e.Name&&""!==e.Name&&(e.index=n.length,n.push(e))})),i.value.Inputs&&i.value.Inputs.forEach((function(e){e.Name&&""!==e.Name&&(e.index=o.length,o.push(e))})),this.cropData.farmer=n,this.cropData.inputs=o,i.value.Seed&&(d=null,i.value.Seed.SeedDate&&(d=new Date(i.value.Seed.SeedDate),d.getFullYear()<1900&&(d=null)),this.seedData={cropName2:i.value.Seed.CropName,cropVarityName:i.value.Seed.CropVarityName,purchasedFrom:i.value.Seed.PurchasedFrom,seedDate:d}),this.cropKey=t);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),storeCrop:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.transactionInProgress){e.next=2;break}return e.abrupt("return");case 2:if(this.response=null,this.formError=null,!(this.fpoName&&this.cropName&&this.cropDate&&this.cropDate&&this.cropId)){e.next=18;break}return this.transactionInProgress=!0,t={data:{fpoName:this.fpoName,cropName:this.cropName,cropDate:this.cropDate.toISOString(),cropId:this.cropId}},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=10,fetch(c["API_LOCATION"]+"createCrop",a);case 10:return r=e.sent,e.next=13,r.json();case 13:s=e.sent,this.transactionInProgress=!1,s.key?(this.response=null,this.cropData={barCode:s.barcode,fpoName:this.fpoName,cropName:this.cropName,cropDate:this.cropDate,cropId:this.cropId,farmer:[],inputs:[]},this.cropKey=s.key,this.fpoName="",this.cropName="",this.cropDate=null,this.cropId=""):this.formError="A crop with the given has been created already!",e.next=19;break;case 18:this.formError="Every field must be filled out!";case 19:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),storeSeed:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,r,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.transactionInProgress){e.next=2;break}return e.abrupt("return");case 2:if(this.seedResponse=null,this.seedFormError=null,this.msgTimeout&&(clearTimeout(this.msgTimeout),delete this.msgTimeout),!(this.seedData.cropName2&&this.seedData.cropVarityName&&this.seedData.purchasedFrom&&this.seedData.seedDate)){e.next=19;break}return this.transactionInProgress=!0,t={data:{key:this.cropKey,cropName2:this.seedData.cropName2,cropVarityName:this.seedData.cropVarityName,seedDate:this.seedData.seedDate.toISOString(),purchasedFrom:this.seedData.purchasedFrom}},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=11,fetch(c["API_LOCATION"]+"setSeed",a);case 11:return r=e.sent,e.next=14,r.json();case 14:this.transactionInProgress=!1,this.seedResponse="Seed data was set successfully.",this.msgTimeout=setTimeout((function(){s.seedResponse=null}),4500),e.next=20;break;case 19:this.seedFormError="Every field must be filled out!";case 20:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),storeFarmer:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.dialogTransactionInProgress){e.next=2;break}return e.abrupt("return");case 2:if(this.farmerFormError=null,!this.farmerDetail.farmerName||!this.farmerDetail.farmerAddress){e.next=17;break}return this.dialogTransactionInProgress=!0,t={data:{key:this.cropKey,farmerName:this.farmerDetail.farmerName,farmerAddress:this.farmerDetail.farmerAddress}},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=9,fetch(c["API_LOCATION"]+"addFarmer",a);case 9:return r=e.sent,e.next=12,r.json();case 12:this.dialogTransactionInProgress=!1,this.cropData&&(this.cropData.farmer||(this.cropData.farmer=[]),this.cropData.farmer.push({Name:this.farmerDetail.farmerName,Address:this.farmerDetail.farmerAddress,index:this.cropData.farmer.length})),this.farmerDetailActive=!1,e.next=18;break;case 17:this.farmerFormError="Every field must be filled out!";case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openFarmerDialog:function(){this.farmerDetail={},this.farmerFormError=null,this.farmerDetailActive=!0},storeInput:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.dialogTransactionInProgress){e.next=2;break}return e.abrupt("return");case 2:if(this.inputFormError=null,!(this.inputDetail.inputName&&this.inputDetail.inputType&&this.inputDetail.inputPurchasedFrom&&this.inputDetail.inputDate)){e.next=17;break}return this.dialogTransactionInProgress=!0,t={data:{key:this.cropKey,inputName:this.inputDetail.inputName,inputType:this.inputDetail.inputType,inputPurchasedFrom:this.inputDetail.inputPurchasedFrom,inputDate:this.inputDetail.inputDate.toISOString()}},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},e.next=9,fetch(c["API_LOCATION"]+"addInputs",a);case 9:return r=e.sent,e.next=12,r.json();case 12:this.dialogTransactionInProgress=!1,this.cropData&&(this.cropData.inputs||(this.cropData.inputs=[]),this.cropData.inputs.push({Name:this.inputDetail.inputName,Type:this.inputDetail.inputType,PurchasedFrom:this.inputDetail.inputPurchasedFrom,InputDate:this.inputDetail.inputDate,index:this.cropData.inputs.length})),this.inputDetailActive=!1,e.next=18;break;case 17:this.inputFormError="Every field must be filled out!";case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),openInputDialog:function(){this.inputDetail={},this.inputFormError=null,this.inputDetailActive=!0},goBack:function(){this.backToSearch?this.$router.push({name:"history"}):this.resetCropDetailData()},resetCropDetailData:function(){this.cropData=null,this.seedData=null,this.seedData={},this.cropKey=null,this.readMode=!1},showCropImage:function(e,t){var a=!1,r=!1,s=!1,i=!1,n="";return t&&""!==t&&(n=t.toLowerCase()),n.indexOf("banan")>=0&&(r=!0),(n.indexOf("apple")>=0||n.indexOf("apfel")>=0)&&(s=!0),(n.indexOf("pear")>=0||n.indexOf("birne")>=0)&&(i=!0),"banana"===e?!r||s||i||(a=!0):"pear"===e?r||s||!i||(a=!0):"apple"===e&&(r||i||(a=!0)),a},formatDate:function(e){return e?o()(String(e)).format("DD/MM/YYYY"):""}},computed:{validationFpoMsgClass:function(){var e={};return this.checkFormValidity&&this.fpoName,e}}},l=m,p=(a("b240"),a("2877")),u=Object(p["a"])(l,r,s,!1,null,"3a221720",null);t["default"]=u.exports},"7b74":function(e,t,a){},b240:function(e,t,a){"use strict";var r=a("7b74"),s=a.n(r);s.a},c975:function(e,t,a){"use strict";var r=a("23e7"),s=a("4d64").indexOf,i=a("a640"),n=a("ae40"),o=[].indexOf,d=!!o&&1/[1].indexOf(1,-0)<0,c=i("indexOf"),m=n("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:d||!c||!m},{indexOf:function(e){return d?o.apply(this,arguments)||0:s(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-02fd7dfb.3344b658.js.map