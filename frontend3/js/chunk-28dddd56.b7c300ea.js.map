{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.regexp.to-string.js","webpack:///./src/components/history/History.vue?56e1","webpack:///./src/components/history/History.js","webpack:///./src/components/history/History.js?80a1","webpack:///./src/components/history/History.vue","webpack:///./src/components/history/History.scss?640a"],"names":["redefine","anObject","fails","flags","TO_STRING","RegExpPrototype","RegExp","prototype","nativeToString","NOT_GENERIC","call","source","INCORRECT_NAME","name","R","this","p","String","rf","f","undefined","unsafe","render","_vm","_h","$createElement","_c","_self","staticClass","_e","attrs","_v","on","fpoChanged","model","value","filterData","callback","$$v","$set","expression","staticStyle","$event","showBarcodeScanner","nameChanged","yearChanged","_s","formError","showTracing","searchResult","length","transactionInProgress","searchData","scopedSlots","_u","key","fn","ref","item","openKeyDetail","Key","FpoName","CropName","formatDate","CropDate","CropId","onBarcodeDecode","staticRenderFns","components","LayoutDefault","data","barcodeKey","mounted","tmpSearchData","localStorage","getItem","tmpFilterData","JSON","parse","fpoName","e","methods","result","payload","barcode","toString","requestOptions","method","headers","body","stringify","fetch","API_LOCATION","ApiResponse","json","responseData","isArray","reqRoute","cropName","cropYear","cropId","response","r","forEach","element","Value","cropIdTemplate","push","setItem","tmpSplit","split","moment","format","cropKey","readMode","cropData","barCode","cropDate","Date","farmers","inputs","Farmer","Name","index","Inputs","farmer","seedData","Seed","seedDate","SeedDate","getFullYear","cropName2","cropVarityName","CropVarityName","purchasedFrom","PurchasedFrom","$router","params","component"],"mappings":"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","file":"js/chunk-28dddd56.b7c300ea.js","sourcesContent":["'use strict';\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar fails = require('../internals/fails');\nvar flags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar nativeToString = RegExpPrototype[TO_STRING];\n\nvar NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = nativeToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.github.io/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = String(R.source);\n    var rf = R.flags;\n    var f = String(rf === undefined && R instanceof RegExp && !('flags' in RegExpPrototype) ? flags.call(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('layout-default',[_c('div',{staticClass:\"trace-view\"},[(_vm.transactionInProgress)?_c('div',{staticClass:\"trace-view-locked\"}):_vm._e(),_c('div',[_c('form',{staticClass:\"md-layout\",attrs:{\"novalidate\":\"\",\"id\":\"app\",\"action\":\"#\",\"method\":\"post\"}},[_c('md-card',{staticClass:\"md-layout-item md-small-size-100\"},[_c('md-card-header',[_c('div',{staticClass:\"md-title\"},[_vm._v(\"Trace crop\")])]),_c('md-card-content',[_c('div',{staticClass:\"md-layout md-gutter\"},[_c('div',{staticClass:\"md-layout-item md-xsmall-size-100 md-small-size-50\"},[_c('md-field',[_c('label',[_vm._v(\"FPO name\")]),_c('md-input',{on:{\"input\":_vm.fpoChanged},model:{value:(_vm.filterData.fpoName),callback:function ($$v) {_vm.$set(_vm.filterData, \"fpoName\", $$v)},expression:\"filterData.fpoName\"}}),_c('md-button',{staticClass:\"md-icon-button barcode-btn\",staticStyle:{\"margin\":\"0\"},on:{\"click\":function($event){_vm.showBarcodeScanner = !_vm.showBarcodeScanner}}},[_c('md-icon',[_vm._v(\"qr_code_scanner\")])],1)],1)],1),_c('div',{staticClass:\"md-layout-item md-xsmall-size-100 md-small-size-50\"},[(_vm.filterData.fpoName)?_c('md-field',[_c('label',[_vm._v(\"Crop name\")]),_c('md-input',{on:{\"input\":_vm.nameChanged},model:{value:(_vm.filterData.cropName),callback:function ($$v) {_vm.$set(_vm.filterData, \"cropName\", $$v)},expression:\"filterData.cropName\"}})],1):_vm._e()],1),_c('div',{staticClass:\"md-layout-item md-xsmall-size-100 md-small-size-50\"},[(_vm.filterData.cropName)?_c('md-field',[_c('label',[_vm._v(\"Year\")]),_c('md-input',{on:{\"input\":_vm.yearChanged},model:{value:(_vm.filterData.cropYear),callback:function ($$v) {_vm.$set(_vm.filterData, \"cropYear\", $$v)},expression:\"filterData.cropYear\"}})],1):_vm._e()],1),_c('div',{staticClass:\"md-layout-item md-xsmall-size-100 md-small-size-50\"},[(_vm.filterData.cropYear)?_c('md-field',[_c('label',[_vm._v(\"Crop ID\")]),_c('md-input',{model:{value:(_vm.filterData.cropId),callback:function ($$v) {_vm.$set(_vm.filterData, \"cropId\", $$v)},expression:\"filterData.cropId\"}})],1):_vm._e()],1)]),(_vm.formError)?_c('div',{staticClass:\"response response-error\"},[_vm._v(\" \"+_vm._s(_vm.formError)+\" \")]):_vm._e(),(_vm.showTracing && _vm.searchResult.length === 0)?_c('div',{staticClass:\"response response-error\"},[_c('b',[_vm._v(\"No crop was found.\")])]):_vm._e(),_c('md-card-actions',[(_vm.transactionInProgress)?_c('div',{staticClass:\"rq-spinner-container\"},[_c('md-progress-spinner',{attrs:{\"md-mode\":\"indeterminate\",\"md-diameter\":30,\"md-stroke\":3}})],1):_vm._e(),(!_vm.transactionInProgress)?_c('md-button',{staticClass:\"md-accent md-raised\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.searchData}},[_vm._v(\"Search\")]):_vm._e()],1)],1)],1)],1)]),(_vm.showTracing && _vm.searchResult.length > 0)?_c('div',{staticClass:\"crop-list-container\"},[_c('div',{staticClass:\"hide-on-mobile\"},[_c('md-table',{attrs:{\"md-sort\":\"CropName\",\"md-sort-order\":\"asc\",\"md-card\":\"\"},scopedSlots:_vm._u([{key:\"md-table-row\",fn:function(ref){\nvar item = ref.item;\nreturn _c('md-table-row',{on:{\"click\":function($event){return _vm.openKeyDetail(item.Key)}}},[_c('md-table-cell',{attrs:{\"md-label\":\"FPO name\",\"md-sort-by\":\"FpoName\"}},[_vm._v(_vm._s(item.FpoName))]),_c('md-table-cell',{attrs:{\"md-label\":\"Crop name\",\"md-sort-by\":\"CropName\"}},[_vm._v(_vm._s(item.CropName))]),_c('md-table-cell',{attrs:{\"md-label\":\"Date\",\"md-sort-by\":\"CropDate\"}},[_vm._v(_vm._s(_vm.formatDate(item.CropDate)))]),_c('md-table-cell',{attrs:{\"md-label\":\"Crop ID\",\"md-sort-by\":\"CropId\"}},[_vm._v(_vm._s(item.CropId))])],1)}}],null,false,3736586087),model:{value:(_vm.searchResult),callback:function ($$v) {_vm.searchResult=$$v},expression:\"searchResult\"}},[_c('md-table-toolbar',[_c('h1',{staticClass:\"md-title\"},[_vm._v(\"Search result\")])])],1)],1),_c('div',{staticClass:\"mobile-only\"},[_c('md-table',{attrs:{\"md-sort\":\"CropName\",\"md-sort-order\":\"asc\",\"md-card\":\"\"},scopedSlots:_vm._u([{key:\"md-table-row\",fn:function(ref){\nvar item = ref.item;\nreturn _c('md-table-row',{on:{\"click\":function($event){return _vm.openKeyDetail(item.Key)}}},[_c('md-table-cell',{attrs:{\"md-label\":\"FPO\",\"md-sort-by\":\"FpoName\"}},[_vm._v(_vm._s(item.FpoName))]),_c('md-table-cell',{attrs:{\"md-label\":\"Crop\",\"md-sort-by\":\"CropName\"}},[_vm._v(_vm._s(item.CropName))]),_c('md-table-cell',{attrs:{\"md-label\":\"Date / ID\",\"md-sort-by\":\"CropDate\"}},[_vm._v(_vm._s(_vm.formatDate(item.CropDate) + \" / \" + item.CropId))])],1)}}],null,false,1159842965),model:{value:(_vm.searchResult),callback:function ($$v) {_vm.searchResult=$$v},expression:\"searchResult\"}},[_c('md-table-toolbar',[_c('h1',{staticClass:\"md-title\"},[_vm._v(\"Search result\")])])],1)],1)]):_vm._e()]),_c('BarcodeScanner',{attrs:{\"openDialog\":_vm.showBarcodeScanner},on:{\"barcodeScanned\":_vm.onBarcodeDecode}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import moment from 'moment';\r\nimport LayoutDefault from \"../../layouts/LayoutDefault.vue\";\r\nimport { API_LOCATION } from \"../../config/env\";\r\nexport default {\r\n    name: \"History\",\r\n    components: {\r\n        LayoutDefault,\r\n    },\r\n    data: () => ({\r\n        barcodeKey: null,\r\n        searchResult: [],\r\n        filterData: {},\r\n        formError: null,\r\n        showTracing: false,\r\n        transactionInProgress: false,\r\n        showBarcodeScanner: false\r\n    }),\r\n    mounted: function () {\r\n        // here we go...\r\n        const tmpSearchData = localStorage.getItem('search-data');\r\n        if (tmpSearchData) {\r\n            try {\r\n                const tmpFilterData = JSON.parse(tmpSearchData);\r\n                if (tmpFilterData.fpoName) {\r\n                    this.filterData = tmpFilterData;\r\n                    this.searchData();\r\n                }\r\n            } catch (e) {\r\n                // do nothing...\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        onBarcodeDecode: async function (result) {\r\n            if (result && result > 0) {\r\n                const payload = {\r\n                    data: {\r\n                        barcode: result.toString()\r\n                    }\r\n                };\r\n                const requestOptions = {\r\n                    method: \"POST\",\r\n                    headers: { \"Content-Type\": \"application/json\" },\r\n                    body: JSON.stringify(payload),\r\n                };\r\n                const ApiResponse = await fetch(API_LOCATION + \"getCrop\", requestOptions);\r\n                const responseData = await ApiResponse.json();\r\n                if (responseData) {\r\n                    if (responseData.key) {\r\n                        if (responseData.key !== \"noKey\") {\r\n                            this.openKeyDetail(responseData.key, true);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        searchData: async function () {\r\n            this.searchResult = [];\r\n            this.showTracing = false;\r\n            this.formError = null;\r\n            if (this.filterData.fpoName && this.filterData.fpoName !== '') {\r\n                this.transactionInProgress = true;\r\n                let isArray = true;\r\n                let reqRoute = 'getCropByFpo';\r\n                let payload;\r\n                payload = {\r\n                    fpoName: this.filterData.fpoName\r\n                };\r\n                if (this.filterData.cropName && this.filterData.cropName !== '') {\r\n                    reqRoute = 'getCropByFpoCrop';\r\n                    payload.cropName = this.filterData.cropName;\r\n                }\r\n                if (this.filterData.cropYear && this.filterData.cropYear !== '') {\r\n                    reqRoute = 'getCropByFpoCropYear';\r\n                    payload.cropYear = this.filterData.cropYear;\r\n                }\r\n                if (this.filterData.cropId && this.filterData.cropId !== '') {\r\n                    reqRoute = 'getCrop';\r\n                    payload = {\r\n                        key: this.filterData.fpoName + '~' + this.filterData.cropName + '~' +\r\n                            this.filterData.cropYear + '~' + this.filterData.cropId\r\n                    };\r\n                    isArray = false;\r\n                }\r\n                payload = {\r\n                    data: payload\r\n                };\r\n\r\n                const requestOptions = {\r\n                    method: \"POST\",\r\n                    headers: { \"Content-Type\": \"application/json\" },\r\n                    body: JSON.stringify(payload),\r\n                };\r\n                const ApiResponse = await fetch(API_LOCATION + reqRoute, requestOptions);\r\n                const response = await ApiResponse.json();\r\n                let searchResult = [];\r\n                if (response) {\r\n                    if (!response.r) {\r\n                        if (response.length > 0) {\r\n                            response.forEach((element) => {\r\n                                if (element.Key && element.Value) {\r\n                                    element.Value.Key = element.Key;\r\n                                    element.Value.CropId = this.cropIdTemplate(element.Value);\r\n                                    searchResult.push(element.Value);\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                if (!isArray && response.key && response.key !== 'noKey') {\r\n                    this.openKeyDetail(response.key);\r\n                } else {\r\n                    this.transactionInProgress = false;\r\n                    this.searchResult = searchResult;\r\n                    this.showTracing = true;\r\n                    localStorage.setItem(\"search-data\", JSON.stringify(this.filterData));\r\n                }\r\n            } else {\r\n                this.formError = 'At least the FPO name must be set to search for a crop.';\r\n            }\r\n        },\r\n        fpoChanged() {\r\n            if (!this.filterData.fpoName || this.filterData.fpoName === '') {\r\n                this.filterData.cropName = '';\r\n                this.filterData.cropYear = '';\r\n                this.filterData.cropId = '';\r\n            }\r\n        },\r\n        nameChanged() {\r\n            if (!this.filterData.cropName || this.filterData.cropName === '') {\r\n                this.filterData.cropYear = '';\r\n                this.filterData.cropId = '';\r\n            }\r\n        },\r\n        yearChanged() {\r\n            if (!this.filterData.cropYear || this.filterData.cropYear === '') {\r\n                this.filterData.cropId = '';\r\n            }\r\n        },\r\n        cropIdTemplate(data) {\r\n            let value = '';\r\n            if (data) {\r\n                if (data.Key) {\r\n                    const tmpSplit = data.Key.split('~');\r\n                    if (tmpSplit.length > 0) {\r\n                        value = tmpSplit[(tmpSplit.length - 1)];\r\n                    }\r\n                }\r\n            }\r\n            return value;\r\n        },\r\n        formatDate(value) {\r\n            if (value) {\r\n                return moment(String(value)).format('YYYY')\r\n            }\r\n            return '';\r\n        },\r\n        openKeyDetail: async function (cropKey, readMode) {\r\n            if (cropKey) {\r\n                this.transactionInProgress = true;\r\n                const payload = {\r\n                    data: {\r\n                        key: cropKey\r\n                    }\r\n                };\r\n                const requestOptions = {\r\n                    method: \"POST\",\r\n                    headers: { \"Content-Type\": \"application/json\" },\r\n                    body: JSON.stringify(payload),\r\n                };\r\n                const ApiResponse = await fetch(API_LOCATION + \"getCrop\", requestOptions);\r\n                const responseData = await ApiResponse.json();\r\n                this.transactionInProgress = false;\r\n                if (responseData) {\r\n                    if (responseData.value) {\r\n                        let cropData;\r\n                        cropData = {\r\n                            barCode: null,\r\n                            fpoName: responseData.value.FpoName,\r\n                            cropName: responseData.value.CropName,\r\n                            cropDate: new Date(responseData.value.CropDate),\r\n                            cropId: responseData.value.CropId\r\n                        };\r\n                        const farmers = [],\r\n                            inputs = [];\r\n                        if (responseData.value.Farmer) {\r\n                            responseData.value.Farmer.forEach((element) => {\r\n                                if (element.Name && element.Name !== '') {\r\n                                    element.index = farmers.length;\r\n                                    farmers.push(element);\r\n                                }\r\n                            });\r\n                        }\r\n                        if (responseData.value.Inputs) {\r\n                            responseData.value.Inputs.forEach((element) => {\r\n                                if (element.Name && element.Name !== '') {\r\n                                    element.index = inputs.length;\r\n                                    inputs.push(element);\r\n                                }\r\n                            });\r\n                        }\r\n                        cropData.farmer = farmers;\r\n                        cropData.inputs = inputs;\r\n                        cropData.key = cropKey;\r\n                        cropData.seedData = {};\r\n                        if (responseData.value.Seed) {\r\n                            let seedDate = null;\r\n                            if (responseData.value.Seed.SeedDate) {\r\n                                seedDate = new Date(responseData.value.Seed.SeedDate);\r\n                                if (seedDate.getFullYear() < 1900) {\r\n                                    seedDate = null;\r\n                                }\r\n                            }\r\n                            cropData.seedData = {\r\n                                cropName2: responseData.value.Seed.CropName,\r\n                                cropVarityName: responseData.value.Seed.CropVarityName,\r\n                                purchasedFrom: responseData.value.Seed.PurchasedFrom,\r\n                                seedDate: seedDate\r\n                            };\r\n                        }\r\n                        if (readMode) {\r\n                            cropData.readMode = true;\r\n                        }\r\n                        this.$router.push({\r\n                            name: \"store\",\r\n                            params: { cropData }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n};","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/eslint-loader/index.js??ref--13-0!./History.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/eslint-loader/index.js??ref--13-0!./History.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./History.vue?vue&type=template&id=9610edc6&scoped=true&\"\nimport script from \"./History.js?vue&type=script&lang=js&\"\nexport * from \"./History.js?vue&type=script&lang=js&\"\nimport style0 from \"./History.scss?vue&type=style&index=0&id=9610edc6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9610edc6\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./History.scss?vue&type=style&index=0&id=9610edc6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./History.scss?vue&type=style&index=0&id=9610edc6&lang=scss&scoped=true&\""],"sourceRoot":""}